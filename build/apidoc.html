<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/hoffi/gulp-msbuild#readme"

    >gulp-msbuild (v0.4.7)</a>
</h1>
<h4>msbuild plugin for gulp. Inspired by grunt-msbuild.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-msbuild">module gulp-msbuild</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-msbuild.gulp-msbuild">
            function <span class="apidocSignatureSpan"></span>gulp-msbuild
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gulp-msbuild.</span>msbuild_command_builder</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gulp-msbuild.</span>msbuild_finder</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gulp-msbuild.</span>msbuild_runner</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-msbuild.msbuild_command_builder">module gulp-msbuild.msbuild_command_builder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-msbuild.msbuild_command_builder.buildArguments">
            function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_command_builder.</span>buildArguments
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-msbuild.msbuild_command_builder.construct">
            function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_command_builder.</span>construct
            <span class="apidocSignatureSpan">(file, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-msbuild.msbuild_finder">module gulp-msbuild.msbuild_finder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-msbuild.msbuild_finder.find">
            function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_finder.</span>find
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-msbuild.msbuild_runner">module gulp-msbuild.msbuild_runner</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-msbuild.msbuild_runner.startMsBuildTask">
            function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_runner.</span>startMsBuildTask
            <span class="apidocSignatureSpan">(options, file, callback)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-msbuild" id="apidoc.module.gulp-msbuild">module gulp-msbuild</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-msbuild.gulp-msbuild" id="apidoc.element.gulp-msbuild.gulp-msbuild">
        function <span class="apidocSignatureSpan"></span>gulp-msbuild
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">gulp-msbuild = function (options) {
  var mergedOptions = _.cloneDeep(mergeOptionsWithDefaults(options));
  validateOptions(mergedOptions);

  var stream = through.obj(function(file, enc, callback) {
    var self = this;
    if (!file || !file.path) {
      self.push(file);
      return callback();
    }

    return msbuildRunner.startMsBuildTask(mergedOptions, file, function(err) {
      if (err) return callback(err);
      self.push(file);
      if (mergedOptions.emitEndEvent) self.emit(&#x22;end&#x22;);
      return callback();
    });
  });

  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-msbuild.msbuild_command_builder" id="apidoc.module.gulp-msbuild.msbuild_command_builder">module gulp-msbuild.msbuild_command_builder</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-msbuild.msbuild_command_builder.buildArguments" id="apidoc.element.gulp-msbuild.msbuild_command_builder.buildArguments">
        function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_command_builder.</span>buildArguments
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildArguments = function (options) {
  var args = [];
  args.push(&#x27;/target:&#x27; + options.targets.join(&#x27;;&#x27;));
  args.push(&#x27;/verbosity:&#x27; + options.verbosity);
  if (options.toolsVersion) {
    var version = parseFloat(options.toolsVersion).toFixed(1);
    if (isNaN(version)) {
      version = &#x27;4.0&#x27;;
    }
    args.push(&#x27;/toolsversion:&#x27; + version);
  }

  if (options.nologo) {
    args.push(&#x27;/nologo&#x27;);
  }

  if (options.fileLoggerParameters) {
    args.push(&#x27;/flp:&#x27; + options.fileLoggerParameters);
  }

  if (options.consoleLoggerParameters) {
    args.push(&#x27;/clp:&#x27; + options.consoleLoggerParameters);
  }

  if (options.loggerParameters) {
    args.push(&#x27;/logger:&#x27; + options.loggerParameters);
  }

  // xbuild does not support the `maxcpucount` argument and throws if provided
  if (options.maxcpucount &#x3e;= 0 &#x26;&#x26; options.msbuildPath !== &#x27;xbuild&#x27;) {
    if (options.maxcpucount === 0) {
      args.push(&#x27;/maxcpucount&#x27;);
    } else {
      args.push(&#x27;/maxcpucount:&#x27; + options.maxcpucount);
    }
  }

  if (options.nodeReuse === false) {
    args.push(&#x27;/nodeReuse:False&#x27;)
  }

  if (options.configuration) {
    options.properties = _.extend({
      &#x27;Configuration&#x27;: options.configuration
    }, options.properties);
  }

  if (options.solutionPlatform) {
    options.properties = _.extend({
      &#x27;Platform&#x27;: options.solutionPlatform
    }, options.properties);
  }

  for (var property in options.properties) {
    args.push(&#x27;/property:&#x27; + property + &#x27;=&#x27; + options.properties[property]);
  }

  if (options.customArgs) {
    args = args.concat(options.customArgs);
  }

  return args;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var newOptions = _.cloneDeep(options);

  Object.keys(newOptions.properties).forEach(function(prop) {
    var context = { file: file };
    newOptions.properties[prop] = gutil.template(newOptions.properties[prop], context);
  });

  var args = this.<span class="apidocCodeKeywordSpan">buildArguments</span>(newOptions);

  return {
    executable: path.normalize(options.msbuildPath),
    args: [file.path].concat(args)
  };
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-msbuild.msbuild_command_builder.construct" id="apidoc.element.gulp-msbuild.msbuild_command_builder.construct">
        function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_command_builder.</span>construct
        <span class="apidocSignatureSpan">(file, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">construct = function (file, options) {
  if (!options || Object.keys(options).length &#x3c;= 0) {
    throw new PluginError(constants.PLUGIN_NAME, &#x27;No options specified!&#x27;);
  }

  if (!options.msbuildPath) {
    var msbuildFinder = require(&#x27;./msbuild-finder&#x27;);
    options.msbuildPath = msbuildFinder.find(options);
  }

  var newOptions = _.cloneDeep(options);

  Object.keys(newOptions.properties).forEach(function(prop) {
    var context = { file: file };
    newOptions.properties[prop] = gutil.template(newOptions.properties[prop], context);
  });

  var args = this.buildArguments(newOptions);

  return {
    executable: path.normalize(options.msbuildPath),
    args: [file.path].concat(args)
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x27;use strict&#x27;;

var commandBuilder = require(&#x27;./msbuild-command-builder&#x27;);
var gutil = require(&#x27;gulp-util&#x27;);
var childProcess = require(&#x27;child_process&#x27;);

module.exports.startMsBuildTask = function (options, file, callback) {
var command = commandBuilder.<span class="apidocCodeKeywordSpan">construct</span>(file, options);

if (options.logCommand) {
  gutil.log(gutil.colors.cyan(&#x27;Using MSBuild command:&#x27;), command.executable, command.args.join(&#x27; &#x27;));
}

var io = [&#x27;ignore&#x27;];
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-msbuild.msbuild_finder" id="apidoc.module.gulp-msbuild.msbuild_finder">module gulp-msbuild.msbuild_finder</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-msbuild.msbuild_finder.find" id="apidoc.element.gulp-msbuild.msbuild_finder.find">
        function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_finder.</span>find
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">find = function (options) {
  if (!options.platform.match(/^win/)) {
    return &#x27;xbuild&#x27;;
  }

  var msbuildRoot;
  var is64Bit = options.architecture === &#x27;x64&#x27;;

  // On 64-bit systems msbuild is always under the x86 directory. If this
  // doesn&#x27;t exist we are on a 32-bit system. See also:
  // https://blogs.msdn.microsoft.com/visualstudio/2013/07/24/msbuild-is-now-part-of-visual-studio/
  var pathRoot;
  if (is64Bit) {
    pathRoot = process.env[&#x27;ProgramFiles(x86)&#x27;] || &#x27;C:/Program Files (x86)&#x27;;
  } else {
    pathRoot = process.env[&#x27;ProgramFiles&#x27;] || &#x27;C:/Program Files&#x27;;
  }

  if (options.toolsVersion === &#x27;auto&#x27;) {
    var result = autoDetectVersion(pathRoot);
    msbuildRoot = result[0]
    options.toolsVersion = result[1];
  } else {
    if (options.toolsVersion === 15.0) {
      var msbuildDir = detectMsBuild15Dir(pathRoot);
      if (msbuildDir) {
        msbuildRoot = msbuildDir;
      } else {
        msbuildRoot = pathRoot;
      }
    } else {
      msbuildRoot = pathRoot;
    }
  }

  var version = constants.MSBUILD_VERSIONS[options.toolsVersion];
  if (!version) {
    throw new PluginError(constants.PLUGIN_NAME, &#x27;No MSBuild Version was supplied!&#x27;);
  }

  if (version === &#x27;12.0&#x27; || version === &#x27;14.0&#x27; || version === &#x27;15.0&#x27;) {
    var x64_dir = is64Bit ? &#x27;amd64&#x27; : &#x27;&#x27;;
    return path.join(msbuildRoot, &#x27;MSBuild&#x27;, version, &#x27;Bin&#x27;, x64_dir, &#x27;MSBuild.exe&#x27;);
  } else {
    var framework = is64Bit ? &#x27;Framework64&#x27; : &#x27;Framework&#x27;;
    return path.join(options.windir, &#x27;Microsoft.Net&#x27;, framework, version, &#x27;MSBuild.exe&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
module.exports.construct = function(file, options) {
if (!options || Object.keys(options).length &#x3c;= 0) {
  throw new PluginError(constants.PLUGIN_NAME, &#x27;No options specified!&#x27;);
}

if (!options.msbuildPath) {
  var msbuildFinder = require(&#x27;./msbuild-finder&#x27;);
  options.msbuildPath = msbuildFinder.<span class="apidocCodeKeywordSpan">find</span>(options);
}

var newOptions = _.cloneDeep(options);

Object.keys(newOptions.properties).forEach(function(prop) {
  var context = { file: file };
  newOptions.properties[prop] = gutil.template(newOptions.properties[prop], context);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-msbuild.msbuild_runner" id="apidoc.module.gulp-msbuild.msbuild_runner">module gulp-msbuild.msbuild_runner</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-msbuild.msbuild_runner.startMsBuildTask" id="apidoc.element.gulp-msbuild.msbuild_runner.startMsBuildTask">
        function <span class="apidocSignatureSpan">gulp-msbuild.msbuild_runner.</span>startMsBuildTask
        <span class="apidocSignatureSpan">(options, file, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startMsBuildTask = function (options, file, callback) {
  var command = commandBuilder.construct(file, options);

  if (options.logCommand) {
    gutil.log(gutil.colors.cyan(&#x27;Using MSBuild command:&#x27;), command.executable, command.args.join(&#x27; &#x27;));
  }

  var io = [&#x27;ignore&#x27;];

  io.push(options.stdout ? process.stdout : &#x27;ignore&#x27;);
  io.push(options.stderr ? process.stderr : &#x27;ignore&#x27;);

  var spawnOptions = { stdio: io };

  var cp = childProcess.spawn(command.executable, command.args, spawnOptions);

  cp.on(&#x27;error&#x27;, function (err) {
    if (err) {
      gutil.log(err);
      gutil.log(gutil.colors.red(&#x27;MSBuild failed!&#x27;));

      if (options.errorOnFail) {
        return callback(err);
      }
    }

    return callback();
  });

  cp.on(&#x27;close&#x27;, function (code, signal) {
    if (code === 0) {
      gutil.log(gutil.colors.cyan(&#x27;MSBuild complete!&#x27;));
    } else {
      var msg;

      if (code != null) {
        // Exited normally, but failed.
        msg = &#x27;MSBuild failed with code &#x27; + code + &#x27;!&#x27;;
      } else {
        // Killed by parent process.
        msg = &#x27;MSBuild killed with signal &#x27; + signal + &#x27;!&#x27;;
      }

      gutil.log(gutil.colors.red(msg));

      if (options.errorOnFail) {
        return callback(new Error(msg));
      }
    }

    return callback();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stream = through.obj(function(file, enc, callback) {
  var self = this;
  if (!file || !file.path) {
    self.push(file);
    return callback();
  }

  return msbuildRunner.<span class="apidocCodeKeywordSpan">startMsBuildTask</span>(mergedOptions, file, function(err) {
    if (err) return callback(err);
    self.push(file);
    if (mergedOptions.emitEndEvent) self.emit(&#x22;end&#x22;);
    return callback();
  });
});
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
